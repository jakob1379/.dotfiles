#! /bin/sh

# Headphones connected [on/off]
HEADPHONES=$(amixer -c 0 contents | grep -iA2 'headphone jack' | grep -oP '=\K(on|off)')

# Get volume
MASTER_VOLUME=$(amixer -D pulse sget Master | grep -Po ".*Left:.*\[\K([0-9]+%)")

# Volume [on/off]
VOLUMESTATE=$(amixer -D pulse sget Master | grep -Po 'Left:.*\K(on|off)')


if [ "$VOLUMESTATE" = "on" ]; then
    if [ "$(alsa-capabilities -l u)" ];
    then
	OUTPUT=" VOL"


    elif [ "$HEADPHONES" = "on" ];
    then
	OUTPUT=" VOL"
    else

	OUTPUT="VOL"
    fi
    echo "$OUTPUT $MASTER_VOLUME"
else
    OUTPUT="VOL "
    echo "$OUTPUT"
fi
